(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e,t,a){},136:function(e,t,a){e.exports=a.p+"static/media/money-loader.509e82cc.gif"},137:function(e,t,a){e.exports=a.p+"static/media/coins.443e3830.png"},155:function(e,t,a){e.exports=a(321)},160:function(e,t,a){},162:function(e,t,a){},183:function(e,t,a){},188:function(e,t,a){},190:function(e,t,a){},192:function(e,t,a){},321:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(41),o=a.n(c),i=(a(160),a(14)),s=a(15),l=a(17),u=a(16),d=a(18),m=(a(162),a(327)),h=a(329),p=a(330),g=a(331),f=a(153),v=a(21),E=a(19),y=a.n(E),b=a(37),C=a.n(b),D=new(function(){function e(){var t=this;Object(i.a)(this,e),this.addCategory=function(){t.postRequests("category",{name:"business",type:0,Icon:"faGlobe"})},this.addRecord=function(e){return e.userid=1,t.postRequests("record",e)},this.deleteRecord=function(e){return t.deleteRequests("record",e)},this.deleteCategory=function(){t.deleteRequests("category",8)},this.editCategories=function(){t.putRequests("category",{id:13,name:"sport",type:0,Icon:"faSport"})},this.editRecord=function(e){return e.userId=1,t.putRequests("record",e)}}return Object(s.a)(e,[{key:"getRequests",value:function(e){return C.a.get("/".concat(e)).catch(function(e){console.log("Sorry, something wrong. Get request failed",e)})}},{key:"deleteRequests",value:function(e,t){return console.log(e,t),C.a.delete("/delete/".concat(e,"/").concat(t)).then(function(e){console.log("success",e)}).catch(function(e){console.log("Sorry, something wrong. delete request failed",e)})}},{key:"putRequests",value:function(e,t){return C.a.put("/".concat(e),t,{headers:{"Content-Type":"application/json"}}).then(function(e){console.log("DB Updated",e)}).catch(function(e){console.log(e)})}},{key:"postRequests",value:function(e,t){return C.a.post("/".concat(e),t,{headers:{"Content-Type":"application/json"}}).catch(function(e){console.log("Sorry, something wrong. New data hasn't been added.",e)})}},{key:"getDataFromDB",value:function(){return C.a.get("/getData/".concat(1))}},{key:"getCategoriesFromDB",value:function(){return C.a.get("/categories")}}]),e}()),w=(a(183),a(136)),k=a.n(w),O=(a(102),a(22)),j=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).addRecord=function(){if(e.state.amount<=0)e.setState({isRed:"red"});else{var t=("Expense"===e.state.type?e.state.categoriesExpense.filter(function(t){return t.name===e.state.category}):e.state.categoriesIncome.filter(function(t){return t.name===e.state.category}))[0].id,a="Cash"===e.state.paymentMethod?0:1,n="Expense"===e.state.type?0:1,r=e.state,c={date:r.date,type:n,categoryid:t,paymentmethodid:a,amount:r.amount,currency:r.currency,comment:r.comment};D.addRecord(c).then(function(t){e.props.closeAddForm(),e.props.getRecords()}).catch(function(e){return console.log(e)})}},e.inputChange=function(t){var a;if("type"===t.target.name){var n,r;return r="Income"===t.target.value?e.state.categoriesIncome[0].name:e.state.categoriesExpense[0].name,void e.setState((n={},Object(v.a)(n,t.target.name,t.target.value),Object(v.a)(n,"category",r),n))}e.setState((a={},Object(v.a)(a,t.target.name,t.target.value),Object(v.a)(a,"isRed",""),a))},e.currencies=["NIS","USD","EUR"],e.state={date:"",type:"Expense",category:"",paymentMethod:"Cash",amount:0,currency:"NIS",comment:"",categoriesExpense:[],categoriesIncome:[],isRed:""},e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.getCategories()}},{key:"getCategories",value:function(){var e=this;D.getCategoriesFromDB().then(function(t){var a=t.data.filter(function(e){return 0===e.type}),n=t.data.filter(function(e){return 1===e.type}),r=new Date;r=y()(r).format("YYYY-MM-DD");var c=a[0].name;e.setState({categoriesExpense:a,categoriesIncome:n,date:r,category:c})}).catch(function(e){console.log(e),alert("Problem with DB")})}},{key:"render",value:function(){return r.a.createElement("div",{className:"form"},r.a.createElement("div",{className:"close-button"},r.a.createElement(O.a,{onClick:this.props.closeAddForm,icon:"window-close"})),r.a.createElement("div",null,"ADD NEW"),r.a.createElement("div",{className:"form-input"},r.a.createElement("div",{className:"one-column1",onChange:this.inputChange,name:"type"},r.a.createElement("div",null," Expense ",r.a.createElement("input",{type:"radio",checked:"Expense"===this.state.type,onChange:this.inputChange,value:"Expense",name:"type"})," "),r.a.createElement("span",null," "),r.a.createElement("div",null," Income ",r.a.createElement("input",{type:"radio",checked:"Income"===this.state.type,onChange:this.inputChange,value:"Income",name:"type"})," ")),r.a.createElement("div",{className:"one-column1",onChange:this.inputChange,name:"paymentMethod"},r.a.createElement("div",null," Cash ",r.a.createElement("input",{type:"radio",checked:"Cash"===this.state.paymentMethod,onChange:this.inputChange,value:"Cash",name:"paymentMethod"})," "),r.a.createElement("span",null," "),r.a.createElement("div",null," Card ",r.a.createElement("input",{type:"radio",checked:"Card"===this.state.paymentMethod,onChange:this.inputChange,value:"Card",name:"paymentMethod"})," ")),r.a.createElement("div",null," Date:"),r.a.createElement("div",null," ",r.a.createElement("input",{name:"date",type:"date",value:this.state.date,onChange:this.inputChange})),r.a.createElement("div",null," Category: "),r.a.createElement("div",{className:"sel"}," ",r.a.createElement("select",{name:"category",value:this.state.category,onChange:this.inputChange},"Expense"===this.state.type?this.state.categoriesExpense.map(function(e,t){return r.a.createElement("option",{key:t,value:e.name},e.name)}):this.state.categoriesIncome.map(function(e,t){return r.a.createElement("option",{key:t,value:e.name},e.name)}))),r.a.createElement("div",null," Amount"),r.a.createElement("div",{className:this.state.isRed}," ",r.a.createElement("input",{type:"number",name:"amount",value:this.state.amount,onChange:this.inputChange})," "),r.a.createElement("div",null," Currency: "),r.a.createElement("div",{className:"sel"}," ",r.a.createElement("select",{name:"currency",value:this.state.currency,onChange:this.inputChange},this.currencies.map(function(e,t){return r.a.createElement("option",{key:t,value:e},e)}),";")),r.a.createElement("div",null," Comment"),r.a.createElement("div",null," ",r.a.createElement("input",{type:"text",name:"comment",value:this.state.comment,onChange:this.inputChange})," ")),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.addRecord},"Send")))}}]),t}(n.Component),I=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).editRecord=function(){var t=("Expense"===e.state.type?e.state.categoriesExpense.filter(function(t){return t.name===e.state.category}):e.state.categoriesIncome.filter(function(t){return t.name===e.state.category}))[0].id,a="Cash"===e.state.paymentMethod?0:1,n="Expense"===e.state.type?0:1,r=e.state,c=r.date,o=r.amount,i=r.currency,s=r.comment,l={id:e.props.recordIdToEdit,date:c,type:n,categoryid:t,paymentmethodid:a,amount:o,currency:i,comment:s};D.editRecord(l).then(function(t){e.props.closeEditForm(),e.props.getRecords()}).catch(function(e){return console.log(e)})},e.inputChange=function(t){e.setState(Object(v.a)({},t.target.name,t.target.value))},e.inputChangeType=function(t){var a;e.setState((a={},Object(v.a)(a,t.target.name,t.target.value),Object(v.a)(a,"category",""),a))},e.categoriesExpense=[],e.categoriesIncome=[],e.currencies=["NIS","USD","EUR"],e.state={date:"",type:"",category:"",paymentMethod:"",amount:"",currency:"",comment:"",categoriesExpense:[],categoriesIncome:[]},e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.getCategories();var e=this.props.recordIdToEdit,t=this.props.records.filter(function(t){return t.id===e})[0],a=t.date,n=t.type,r=t.category,c=t.paymentMethodId,o=t.amount,i=t.currency,s=t.comment;n=0===n?"Expense":"Income",r=r.name;var l=0===c?"Cash":"Card";this.setState({date:a,type:n,category:r,paymentMethod:l,amount:o,currency:i,comment:s})}},{key:"getCategories",value:function(){var e=this;D.getCategoriesFromDB().then(function(t){var a=t.data.filter(function(e){return 0===e.type}),n=t.data.filter(function(e){return 1===e.type});e.setState({categoriesExpense:a,categoriesIncome:n})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){return console.log(this.state),r.a.createElement("div",{className:"form"},r.a.createElement("div",{className:"close-button"},r.a.createElement(O.a,{onClick:this.props.closeEditForm,icon:"window-close"})),r.a.createElement("div",null,"EDIT"),r.a.createElement("div",{className:"form-input"},r.a.createElement("div",{className:"one-column1",onChange:this.inputChange,name:"type"},r.a.createElement("div",null," Expense ",r.a.createElement("input",{type:"radio",checked:"Expense"===this.state.type,onChange:this.inputChangeType,value:"Expense",name:"type"})," "),r.a.createElement("span",null," "),r.a.createElement("div",null," Income ",r.a.createElement("input",{type:"radio",checked:"Income"===this.state.type,onChange:this.inputChangeType,value:"Income",name:"type"})," ")),r.a.createElement("div",{className:"one-column1",onChange:this.inputChange,name:"paymentMethod"},r.a.createElement("div",null," Cash ",r.a.createElement("input",{type:"radio",checked:"Cash"===this.state.paymentMethod,onChange:this.inputChange,value:"Cash",name:"paymentMethod"})," "),r.a.createElement("span",null," "),r.a.createElement("div",null," Card ",r.a.createElement("input",{type:"radio",checked:"Card"===this.state.paymentMethod,onChange:this.inputChange,value:"Card",name:"paymentMethod"})," ")),r.a.createElement("div",null," Date:"),r.a.createElement("div",null," ",r.a.createElement("input",{name:"date",type:"date",value:this.state.date,onChange:this.inputChange})),r.a.createElement("div",null," Category: "),r.a.createElement("div",{className:"sel"}," ",r.a.createElement("select",{name:"category",value:this.state.category,onChange:this.inputChange},"Expense"===this.state.type?this.state.categoriesExpense.map(function(e,t){return r.a.createElement("option",{key:t,value:e.name},e.name)}):this.state.categoriesIncome.map(function(e,t){return r.a.createElement("option",{key:t,value:e.name},e.name)}))),r.a.createElement("div",null," Amount"),r.a.createElement("div",null," ",r.a.createElement("input",{type:"number",name:"amount",value:this.state.amount,onChange:this.inputChange})),r.a.createElement("div",null," Currency: "),r.a.createElement("div",{className:"sel"}," ",r.a.createElement("select",{name:"currency",value:this.state.currency,onChange:this.inputChange},this.currencies.map(function(e,t){return r.a.createElement("option",{key:t,value:e},e)}),";")),r.a.createElement("div",null," Comment"),r.a.createElement("div",null," ",r.a.createElement("input",{type:"text",name:"comment",value:this.state.comment,onChange:this.inputChange})," ")),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.editRecord},"Send")))}}]),t}(n.Component),R=(a(188),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).deleteRecord=function(){D.deleteRecord(a.props.recordIdToDelete).then(function(e){a.props.closeDeleteForm(),a.props.getRecords()}).catch(function(e){return console.log(e)})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"delete-form"},r.a.createElement("div",{className:"close-button"},r.a.createElement(O.a,{onClick:this.props.closeDeleteForm,icon:"window-close"})),r.a.createElement("div",null,"Are you sure you want to delete this record? "),r.a.createElement("div",{className:"div-button"},r.a.createElement("button",{onClick:this.deleteRecord},"YES"),r.a.createElement("span",null," "),r.a.createElement("button",{onClick:this.props.closeDeleteForm},"NO")))}}]),t}(n.Component)),S=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).getRecords=function(){D.getDataFromDB().then(function(t){var a=t.data[0].record,n=a.length;a.sort(function(e,t){return new Date(t.date)-new Date(e.date)}),e.setState({allRecords:a,isLoading:!1,total:n})}).catch(function(e){console.log(e)})},e.changeInput=function(t){return e.setState(Object(v.a)({},t.target.name,t.target.value))},e.changePage=function(t){var a=e.state.currentPage;"plus"===t?a++:a--,e.setState({currentPage:a}),e.getCurrentRecords()},e.showLoader=function(){return e.state.isLoading?r.a.createElement("div",{className:"loading"}," ",r.a.createElement("img",{alt:"loader",src:k.a})):null},e.showSearchBar=function(){return r.a.createElement("div",{className:"search-bar"},"From: ",r.a.createElement("input",{type:"date",name:"startDate",value:e.state.startDate,onChange:e.changeInput}),r.a.createElement("span",null," "),"To: ",r.a.createElement("input",{type:"date",name:"endDate",value:e.state.endDate,onChange:e.changeInput}),r.a.createElement("span",null," "),r.a.createElement("input",{type:"text",placeholder:"Search comment",name:"textTosearch",value:e.state.textTosearch,onChange:e.changeInput}))},e.showTotal=function(){return r.a.createElement("div",{className:"total"},"Total: ",r.a.createElement("span",null," "),e.state.total)},e.showItemsPerPage=function(){return r.a.createElement("div",{className:"itemsPerPage"},"Show: ",r.a.createElement("span",null," "),r.a.createElement("select",{name:"itemsPerPage",value:e.state.itemsPerPage,onChange:e.changeInput},e.itemsPerPageOptions.map(function(e){return r.a.createElement("option",{key:e,value:e},e)})))},e.showPagination=function(t,a,n){return r.a.createElement("div",{className:"pagination"},1!==e.state.currentPage?r.a.createElement(O.a,{onClick:function(t){return e.changePage("minus")},icon:"angle-left",size:"1x"}):null,r.a.createElement("span",null," ")," ",t," - ",a," ",r.a.createElement("span",null," "),e.state.currentPage!==n?r.a.createElement(O.a,{onClick:function(){return e.changePage("plus")},icon:"angle-right",size:"1x"}):null)},e.showHeader=function(){return r.a.createElement("div",{id:"grid-header"},e.fields.map(function(e,t){return r.a.createElement("div",{key:t},e)}))},e.showAddForm=function(){e.setState({showAddForm:!0})},e.closeAddForm=function(){return e.setState({showAddForm:!1})},e.closeEditForm=function(){return e.setState({recordIdToEdit:-1})},e.closeDeleteForm=function(){return e.setState({recordIdToDelete:-1})},e.getCurrentRecords=function(){var t=parseInt(e.state.itemsPerPage),a=Object(f.a)(e.state.allRecords),n=(e.state.currentPage-1)*t+1,r=n+t-1;a=a.filter(function(t){return t.comment.toLowerCase().includes(e.state.textTosearch.toLowerCase())&&(t.date>=e.state.startDate||""===e.state.startDate)&&(t.date<=e.state.endDate||""===e.state.endDate)});var c=Math.ceil(a.length/t);return{records:a=a.slice(n-1,r),startIndex:n,endIndex:r,lastPage:c}},e.renderRecords=function(t){return r.a.createElement("div",{id:"grid-container"},e.showHeader(),t.map(function(t){var a=y()(t.date).format("MM/DD/YY");return r.a.createElement("div",{className:"item",key:t.id},r.a.createElement("div",null,a),r.a.createElement("div",null,t.type?r.a.createElement(O.a,{icon:"plus"}):r.a.createElement(O.a,{icon:"minus"})),r.a.createElement("div",null,t.category.name),r.a.createElement("div",null,"cash"===t.paymentMethod.name?r.a.createElement(O.a,{icon:"money-bill-alt"}):r.a.createElement(O.a,{icon:"credit-card"})," "),r.a.createElement("div",null,t.amount),r.a.createElement("div",null,r.a.createElement(O.a,{icon:e.currencyIcon[t.currency]})),r.a.createElement("div",null,t.comment),r.a.createElement("div",null,r.a.createElement(O.a,{icon:"trash-alt",onClick:function(){return e.deleteRecord(t.id)}}),r.a.createElement("span",null," "),r.a.createElement(O.a,{icon:"edit",onClick:function(){return e.editRecord(t.id)}})))}))},e.editRecord=function(t){e.setState({recordIdToEdit:t})},e.deleteRecord=function(t){e.setState({recordIdToDelete:t})},e.fields=["Date","Type","Category","Method","Amount","Currency","Comments"],e.currencyIcon={NIS:"shekel-sign",EUR:"euro-sign",USD:"dollar-sign"},e.itemsPerPageOptions=[10,20,50,100],e.state={isLoading:!0,allRecords:"",total:"",itemsPerPage:10,textTosearch:"",startDate:"2018-01-01",endDate:"",currentPage:1,showAddForm:!1,recordIdToEdit:-1,recordIdToDelete:-1},e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.changeSelected("Records"),this.getRecords();var e=new Date;e=y()(e).format("YYYY-MM-DD"),this.setState({endDate:e})}},{key:"render",value:function(){var e=this,t=this.getCurrentRecords(),a=t.records,n=t.startIndex,c=t.endIndex,o=t.lastPage;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row-bar"},this.showSearchBar(),this.showTotal(),this.showItemsPerPage(),this.showPagination(n,c,o)),this.renderRecords(a),this.state.showAddForm?r.a.createElement(j,{closeAddForm:this.closeAddForm,getRecords:this.getRecords,addRecord:this.addRecord}):null,-1!==this.state.recordIdToEdit?r.a.createElement(I,{closeEditForm:this.closeEditForm,recordIdToEdit:this.state.recordIdToEdit,records:a,getRecords:this.getRecords}):null,-1!==this.state.recordIdToDelete?r.a.createElement(R,{closeDeleteForm:this.closeDeleteForm,recordIdToDelete:this.state.recordIdToDelete,getRecords:this.getRecords}):null,this.showLoader(),r.a.createElement("div",{className:"dot"}," ",r.a.createElement(O.a,{size:"6x",onClick:function(){return e.showAddForm()},icon:"plus"})))}}]),t}(n.Component),M=(a(190),a(137)),x=a.n(M),N=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.changeSelected("Home")}},{key:"render",value:function(){return r.a.createElement("div",{className:"home"},r.a.createElement("div",{className:"text"},'Welcome to the money tracking app. This app will help you to track your spendings and earning. In the tab "Records", you can add, delete and edit new records. In the tab "Stats", you can see charts reflecting your spending habits and see how you can improve. Stack:',r.a.createElement("ul",null,r.a.createElement("li",null,"React"),r.a.createElement("li",null,"Node.js"),r.a.createElement("li",null,"Express"),r.a.createElement("li",null,"JavaScript, ES6"),r.a.createElement("li",null,"PostgreSQL + Sequelize"),r.a.createElement("li",null,"Recharts"),r.a.createElement("li",null,"HTML5"),r.a.createElement("li",null,"CSS3")),r.a.createElement("img",{alt:"coins",src:x.a,height:"200",width:"200"})))}}]),t}(n.Component),F=(a(192),a(325)),T=a(326),P=a(317),Y=a(318),A=a(322),B=a(135),q=a(316),z=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).inputChange=function(t){return e.setState(Object(v.a)({},t.target.name,t.target.value))},e.showDateFilter=function(t){return r.a.createElement("div",{className:"select-month"},r.a.createElement("select",{name:"startDate",value:e.state.startDate,onChange:e.inputChange},t.map(function(e){return r.a.createElement("option",{key:e,value:e},e)})),r.a.createElement("span",null," "),r.a.createElement("select",{name:"endDate",value:e.state.endDate,onChange:e.inputChange},t.map(function(e){return r.a.createElement("option",{key:e,value:e},e)})))},e.state={allRecords:[],months:[],startDate:"",endDate:""},e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=new Date,t="01/"+y()(e).format("YY"),a=y()(e).format("MM/YY");this.setState({startDate:t,endDate:a})}},{key:"generateSelectMonths",value:function(){var e=this.props.allRecords,t=[],a="";if(0!==e.length)for(var n=e.sort(function(e,t){return new Date(e.date)-new Date(t.date)})[0].date,r=this.getDatesSelect(n),c=r.startMonth,o=r.startYear,i=r.currentMonth,s=r.currentYear,l=o;l<=s;l++)for(var u=c;u<=i;u++)a="".concat(u=u<10?"0"+u:u,"/").concat(l),t.push(a);return t}},{key:"getDatesSelect",value:function(e){var t=new Date,a=parseInt(y()(t).format("YY")),n=parseInt(y()(t).format("MM")),r=parseInt(y()(e).format("YY"));return{startMonth:parseInt(y()(e).format("MM")),startYear:r,currentMonth:n,currentYear:a}}},{key:"aggregate",value:function(){var e=this.props.allRecords,t=this.getDateFromMonth(this.state.startDate,""),a=this.getDateFromMonth(this.state.endDate,"end"),n=this.generateMonthTable(),r="",c=[];if(0!==e.length){var o=!0,i=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var d=l.value;r=y()(d.date).format("MM/YY"),d.date>=t&&d.date<a&&(0===d.type?n[r].expense=n[r].expense+d.amount:n[r].income=n[r].income+d.amount)}}catch(g){i=!0,s=g}finally{try{o||null==u.return||u.return()}finally{if(i)throw s}}}if(0!==n.length)for(var m=Object.keys(n),h=0;h<m.length;h++){var p=m[h];c.push({month:p,expense:n[p].expense,income:n[p].income})}return c}},{key:"getDateFromMonth",value:function(e,t){if(void 0!==e&&e.includes("/")){var a=e.split("/");return"end"===t?"20".concat(a[1],"-").concat(a[0]+1,"-01"):"20".concat(a[1],"-").concat(a[0],"-01")}return e}},{key:"generateMonthTable",value:function(){var e={};if(0!==this.props.allRecords.length)for(var t=this.parseDate(this.state.startDate),a=this.parseDate(this.state.endDate),n=t.year;n<=a.year;n++)for(var r=t.month;r<=a.month;r++)e["".concat(r=r<10?"0"+r:r,"/").concat(n)]={income:0,expense:0};return e}},{key:"parseDate",value:function(e){return{month:parseInt(e.split("/")[0]),year:parseInt(e.split("/")[1])}}},{key:"render",value:function(){var e=this.aggregate(),t=this.generateSelectMonths();return r.a.createElement("div",{className:"chart-box"},r.a.createElement("div",{className:"chart-name"},"Income and expenses for period"),this.showDateFilter(t),r.a.createElement(F.a,{width:600,height:400,data:e},r.a.createElement(T.a,{strokeDasharray:"3 3"}),r.a.createElement(P.a,{dataKey:"month",padding:{left:30,right:30}}),r.a.createElement(Y.a,null),r.a.createElement(A.a,null),r.a.createElement(B.a,null),r.a.createElement(q.a,{type:"monotone",dataKey:"income",stroke:"#8884d8",activeDot:{r:8}}),r.a.createElement(q.a,{type:"monotone",dataKey:"expense",stroke:"#82ca9d"})))}}]),t}(n.Component),U=a(328),L=a(323),H=["#0088FE","#00C49F","#FFBB28","#FF8042","#3e4af9","#f95d3e","#d3f93e","#b560f2","#f24b7a","#9bf998"],K=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).inputChange=function(t){return e.setState(Object(v.a)({},t.target.name,t.target.value))},e.showFilter=function(t){return r.a.createElement("div",{className:"select-month"},r.a.createElement("select",{name:"selectedMonth",value:e.state.selectedMonth,onChange:e.inputChange},t.map(function(e){return r.a.createElement("option",{key:e,value:e},e)})),r.a.createElement("span",null," "),r.a.createElement("select",{name:"type",value:e.type,onChange:e.inputChange},r.a.createElement("option",{value:"expense"},"expense"),r.a.createElement("option",{value:"income"},"income")))},e.state={allRecords:[],months:[],selectedMonth:"10/18",type:"expense"},e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"generateSelectMonths",value:function(){var e=this.props.allRecords,t=[],a="";if(0!==e.length)for(var n=e.sort(function(e,t){return new Date(e.date)-new Date(t.date)})[0].date,r=this.getDatesSelect(n),c=r.startMonth,o=r.startYear,i=r.currentMonth,s=r.currentYear,l=o;l<=s;l++)for(var u=c;u<=i;u++)a="".concat(u=u<10?"0"+u:u,"/").concat(l),t.push(a);return t}},{key:"getDatesSelect",value:function(e){var t=new Date,a=parseInt(y()(t).format("YY")),n=parseInt(y()(t).format("MM")),r=parseInt(y()(e).format("YY"));return{startMonth:parseInt(y()(e).format("MM")),startYear:r,currentMonth:n,currentYear:a}}},{key:"aggregate",value:function(){var e=this.props.allRecords,t=this.getDateFromMonth(this.state.selectedMonth,""),a=this.getDateFromMonth(this.state.selectedMonth,"end"),n={},r=[],c="expense"===this.state.type?0:1;return 0!==e.length&&(e.map(function(e){e.date>=t&&e.date<a&&e.type===c&&(n[e.category.name]=n[e.category.name]+e.amount||e.amount)}),Object.keys(n).map(function(e){return r.push({name:e,value:n[e]})}),r.sort(function(e,t){return t.value-e.value}),r.forEach(function(e,t){return e.fill=H[t%H.length]})),r}},{key:"getDateFromMonth",value:function(e,t){if(void 0!==e&&e.includes("/")){var a=e.split("/");return"end"===t?"20".concat(a[1],"-").concat(a[0]+1,"-01"):"20".concat(a[1],"-").concat(a[0],"-01")}return e}},{key:"render",value:function(){var e=this.aggregate(),t=this.generateSelectMonths();return r.a.createElement("div",{className:"chart-box"},r.a.createElement("div",{className:"chart-name"},"Income and expenses per month"),this.showFilter(t),r.a.createElement(U.a,{width:400,height:400},r.a.createElement(L.a,{isAnimationActive:!1,dataKey:"value",data:e,cx:200,cy:200,outerRadius:150,fill:"#8884d8",label:!0}),r.a.createElement(A.a,null)))}}]),t}(n.Component),W=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).getRecords=function(){D.getDataFromDB().then(function(t){var a=t.data[0].record;a.sort(function(e,t){return new Date(t.date)-new Date(e.date)}),e.setState({allRecords:a,isLoading:!1})}).catch(function(e){console.log(e)})},e.changeInput=function(t){return e.setState(Object(v.a)({},t.target.name,t.target.value))},e.state={isLoading:!0,allRecords:""},e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.changeSelected("Stats"),this.getRecords()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(z,{allRecords:this.state.allRecords}),r.a.createElement(K,{allRecords:this.state.allRecords}))}}]),t}(n.Component),J=a(57),G=a(25);J.b.add(G.a,G.b,G.c,G.m,G.j,G.h,G.i,G.d,G.l,G.k,G.e,G.g,G.f);var Q=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).showNavBar=function(){return r.a.createElement("div",{id:"nav-bar"},r.a.createElement("ul",{id:"nav-bar"},e.tabs.map(function(t,a){return r.a.createElement("li",{key:a},r.a.createElement(m.a,{className:e.state.selected===t?"selected":"",to:"/"+t},r.a.createElement("span",null,t)))})))},e.changeSelected=function(t){return e.setState({selected:t})},e.tabs=["Home","Records","Stats"],e.state={selected:""},e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(h.a,null,r.a.createElement("div",{className:"App"},this.showNavBar(),r.a.createElement(p.a,null,r.a.createElement(g.a,{path:"/records",exact:!0,render:function(){return r.a.createElement(S,{changeSelected:e.changeSelected})}}),r.a.createElement(g.a,{path:"/home",exact:!0,render:function(){return r.a.createElement(N,{changeSelected:e.changeSelected})}}),"} />",r.a.createElement(g.a,{path:"/stats",exact:!0,render:function(){return r.a.createElement(W,{changeSelected:e.changeSelected})}}),"} />",r.a.createElement(g.a,{path:"/",render:function(){return r.a.createElement(N,null)}}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $,V,X,Z,_,ee,te,ae,ne,re,ce=a(38),oe=a(39),ie=(a(320),a(13)),se=new($=function e(){var t=this;Object(i.a)(this,e),Object(ce.a)(this,"users",V,this),Object(ce.a)(this,"children",X,this),Object(ce.a)(this,"parent",Z,this),Object(ce.a)(this,"selectedOption",_,this),Object(ce.a)(this,"addChildBox",ee,this),Object(ce.a)(this,"currentUserIdForAddChild",te,this),Object(ce.a)(this,"closeAddBox",ae,this),Object(ce.a)(this,"getChildren",ne,this),this.addNewUserToState=function(e){t.users.push(e),console.log(t.users)},Object(ce.a)(this,"addChildToDb",re,this)},V=Object(oe.a)($.prototype,"users",[ie.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),X=Object(oe.a)($.prototype,"children",[ie.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Z=Object(oe.a)($.prototype,"parent",[ie.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_=Object(oe.a)($.prototype,"selectedOption",[ie.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),ee=Object(oe.a)($.prototype,"addChildBox",[ie.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),te=Object(oe.a)($.prototype,"currentUserIdForAddChild",[ie.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),ae=Object(oe.a)($.prototype,"closeAddBox",[ie.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){console.log("close"),e.addChildBox=!1}}}),ne=Object(oe.a)($.prototype,"getChildren",[ie.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=e.selectedOption;console.log("userId",t),C.a.get("http://localhost:5001/getChildren/".concat(t)).then(function(t){console.log(t.data),e.parent=t.data,e.children=t.data.Children,console.log("this children",t.data.Children)})}}}),re=Object(oe.a)($.prototype,"addChildToDb",[ie.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){t.parentId=e.currentUserIdForAddChild,console.log("clickedChild",t),C.a.post("http://localhost:5001/addChild",t,{headers:{"Content-Type":"application/json"}}).then(function(t){console.log("response from DB",t),e.addNewUserToState(t.data)}).catch(function(e){alert("Sorry, something wrong. New client haven't added."),console.log(e)}),e.closeAddBox(),console.log("Added to DB")}}}),$);window.store=se;var le=se,ue=a(152);window.store=le,o.a.render(r.a.createElement(ue.a,{store:le},r.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[155,2,1]]]);
//# sourceMappingURL=main.16c8d406.chunk.js.map